---
title: "판별 분석을 활용한 보험 위험도 분류"
date: "2025-02-20"
category: "analysis"
tags: ["판별분석", "위험도분류", "보험분석"]
excerpt: "판별 분석의 이론적 배경과 보험 위험도 분류에서의 활용법을 살펴보고, 실무 적용 사례를 제공합니다."
---

판별 분석(Discriminant Analysis)은 보험업계에서 고객의 위험도를 분류하는 핵심 기법입니다. 이번 포스트에서는 판별 분석의 이론적 배경과 보험 위험도 분류에서의 실무적 활용법을 자세히 살펴보겠습니다.

## 판별 분석의 정의와 목적

판별 분석은 여러 그룹을 구분하는 선형 함수를 찾아 새로운 관측값을 적절한 그룹에 분류하는 기법입니다:

### 1. 판별 분석의 목적

- **그룹 분류**: 새로운 관측값을 적절한 그룹에 분류
- **차별화**: 그룹 간의 차이를 최대화
- **예측**: 새로운 관측값의 그룹 예측
- **해석**: 그룹 분류에 중요한 변수 파악

### 2. 판별 분석의 원리

**판별 함수 = 가중치 × 변수 + 상수**

```
D = w₁X₁ + w₂X₂ + ... + wₚXₚ + c
```

여기서:
- **D**: 판별 점수
- **wᵢ**: i번째 변수의 가중치
- **Xᵢ**: i번째 변수
- **c**: 상수

## 보험업계에서의 판별 분석 활용

### 1. 주요 활용 영역

- **위험도 분류**: 보험 고객의 위험도별 분류
- **보험료 산출**: 위험도별 차별화된 보험료 산출
- **마케팅**: 타겟 고객 그룹별 마케팅 전략
- **리스크 관리**: 위험도별 고객 관리

### 2. 파이썬을 활용한 판별 분석

```python
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns
from sklearn.discriminant_analysis import LinearDiscriminantAnalysis, QuadraticDiscriminantAnalysis
from sklearn.preprocessing import StandardScaler
from sklearn.model_selection import train_test_split
from sklearn.metrics import classification_report, confusion_matrix, accuracy_score
import warnings
warnings.filterwarnings('ignore')

# 보험 고객 데이터 생성 (예시)
np.random.seed(42)
n_samples = 1000

# 고객 특성
age = np.random.normal(35, 10, n_samples)
driving_experience = np.random.normal(10, 5, n_samples)
car_value = np.random.normal(20000, 5000, n_samples)
claims_history = np.random.poisson(2, n_samples)
premium_paid = np.random.normal(1000, 200, n_samples)

# 위험도 분류 (0: 저위험, 1: 중위험, 2: 고위험)
risk_level = np.zeros(n_samples)
for i in range(n_samples):
    if claims_history[i] >= 3 or age[i] < 25 or age[i] > 65:
        risk_level[i] = 2  # 고위험
    elif claims_history[i] >= 1 or age[i] < 30 or age[i] > 60:
        risk_level[i] = 1  # 중위험
    else:
        risk_level[i] = 0  # 저위험

# 데이터프레임 생성
data = pd.DataFrame({
    'age': age,
    'driving_experience': driving_experience,
    'car_value': car_value,
    'claims_history': claims_history,
    'premium_paid': premium_paid,
    'risk_level': risk_level
})

print("보험 고객 데이터 기본 통계:")
print(data.describe())
```

### 3. 선형 판별 분석

```python
def linear_discriminant_analysis(data):
    """선형 판별 분석"""
    
    # 특성과 타겟 분리
    X = data[['age', 'driving_experience', 'car_value', 'claims_history', 'premium_paid']]
    y = data['risk_level']
    
    # 데이터 정규화
    scaler = StandardScaler()
    X_scaled = scaler.fit_transform(X)
    
    # 훈련/테스트 데이터 분할
    X_train, X_test, y_train, y_test = train_test_split(X_scaled, y, test_size=0.2, random_state=42)
    
    # 선형 판별 분석
    lda = LinearDiscriminantAnalysis()
    lda.fit(X_train, y_train)
    
    # 예측
    y_pred = lda.predict(X_test)
    
    # 모델 평가
    accuracy = accuracy_score(y_test, y_pred)
    
    print("선형 판별 분석 결과:")
    print(f"  정확도: {accuracy:.3f}")
    print(f"  분류 보고서:")
    print(classification_report(y_test, y_pred))
    
    return lda, accuracy

# 선형 판별 분석 실행
lda_model, lda_accuracy = linear_discriminant_analysis(data)
```

### 4. 이차 판별 분석

```python
def quadratic_discriminant_analysis(data):
    """이차 판별 분석"""
    
    # 특성과 타겟 분리
    X = data[['age', 'driving_experience', 'car_value', 'claims_history', 'premium_paid']]
    y = data['risk_level']
    
    # 데이터 정규화
    scaler = StandardScaler()
    X_scaled = scaler.fit_transform(X)
    
    # 훈련/테스트 데이터 분할
    X_train, X_test, y_train, y_test = train_test_split(X_scaled, y, test_size=0.2, random_state=42)
    
    # 이차 판별 분석
    qda = QuadraticDiscriminantAnalysis()
    qda.fit(X_train, y_train)
    
    # 예측
    y_pred = qda.predict(X_test)
    
    # 모델 평가
    accuracy = accuracy_score(y_test, y_pred)
    
    print("이차 판별 분석 결과:")
    print(f"  정확도: {accuracy:.3f}")
    print(f"  분류 보고서:")
    print(classification_report(y_test, y_pred))
    
    return qda, accuracy

# 이차 판별 분석 실행
qda_model, qda_accuracy = quadratic_discriminant_analysis(data)
```

## 엑셀을 활용한 판별 분석

### 1. 기본 설정

```excel
A1: 고객ID
B1: 나이
C1: 운전경력
D1: 차량가격
E1: 사고이력
F1: 보험료
G1: 위험도

A2: =ROW()-1
B2: =RAND()*50+20
C2: =RAND()*20+1
D2: =RAND()*30000+10000
E2: =POISSON.DIST(RAND(),2,TRUE)
F2: =RAND()*400+800
G2: =IF(E2>=3,2,IF(E2>=1,1,0))
```

### 2. 판별 함수 계산

```excel
# 판별 함수 계수
A10: 변수
B10: 저위험
C10: 중위험
D10: 고위험

A11: 나이
B11: =LINEST(G2:G1001,B2:B1001)
C11: =LINEST(G2:G1001,C2:C1001)
D11: =LINEST(G2:G1001,D2:D1001)
```

### 3. 분류 정확도

```excel
# 분류 정확도
A15: 분류
B15: 실제
C15: 예측
D15: 정확도

A16: 저위험
B16: =COUNTIF(G2:G1001,0)
C16: =COUNTIFS(G2:G1001,0,H2:H1001,0)
D16: =C16/B16

A17: 중위험
B17: =COUNTIF(G2:G1001,1)
C17: =COUNTIFS(G2:G1001,1,H2:H1001,1)
D17: =C17/B17

A18: 고위험
B18: =COUNTIF(G2:G1001,2)
C18: =COUNTIFS(G2:G1001,2,H2:H1001,2)
D18: =C18/B18
```

## 고급 분석 기법

### 1. 판별 분석 시각화

```python
def visualize_discriminant_analysis(lda, X_scaled, y):
    """판별 분석 시각화"""
    
    # 판별 함수 점수
    discriminant_scores = lda.transform(X_scaled)
    
    # 시각화
    fig, ((ax1, ax2), (ax3, ax4)) = plt.subplots(2, 2, figsize=(15, 12))
    
    # 첫 번째와 두 번째 판별 함수
    for i in range(3):
        mask = y == i
        ax1.scatter(discriminant_scores[mask, 0], discriminant_scores[mask, 1], 
                   label=f'위험도 {i}', alpha=0.6)
    ax1.set_title('판별 함수 점수')
    ax1.set_xlabel('첫 번째 판별 함수')
    ax1.set_ylabel('두 번째 판별 함수')
    ax1.legend()
    ax1.grid(True, alpha=0.3)
    
    # 혼동 행렬
    y_pred = lda.predict(X_scaled)
    cm = confusion_matrix(y, y_pred)
    sns.heatmap(cm, annot=True, fmt='d', cmap='Blues', ax=ax2)
    ax2.set_title('혼동 행렬')
    ax2.set_xlabel('예측')
    ax2.set_ylabel('실제')
    
    # 판별 함수 계수
    coefficients = lda.coef_
    ax3.bar(range(len(coefficients[0])), coefficients[0])
    ax3.set_title('첫 번째 판별 함수 계수')
    ax3.set_xlabel('변수')
    ax3.set_ylabel('계수')
    ax3.grid(True, alpha=0.3)
    
    # 분류 경계
    x_min, x_max = discriminant_scores[:, 0].min() - 1, discriminant_scores[:, 0].max() + 1
    y_min, y_max = discriminant_scores[:, 1].min() - 1, discriminant_scores[:, 1].max() + 1
    xx, yy = np.meshgrid(np.arange(x_min, x_max, 0.1), np.arange(y_min, y_max, 0.1))
    Z = lda.predict(np.c_[xx.ravel(), yy.ravel()])
    Z = Z.reshape(xx.shape)
    ax4.contourf(xx, yy, Z, alpha=0.3)
    for i in range(3):
        mask = y == i
        ax4.scatter(discriminant_scores[mask, 0], discriminant_scores[mask, 1], 
                   label=f'위험도 {i}', alpha=0.6)
    ax4.set_title('분류 경계')
    ax4.set_xlabel('첫 번째 판별 함수')
    ax4.set_ylabel('두 번째 판별 함수')
    ax4.legend()
    ax4.grid(True, alpha=0.3)
    
    plt.tight_layout()
    plt.show()

# 판별 분석 시각화 실행
X = data[['age', 'driving_experience', 'car_value', 'claims_history', 'premium_paid']]
y = data['risk_level']
scaler = StandardScaler()
X_scaled = scaler.fit_transform(X)
visualize_discriminant_analysis(lda_model, X_scaled, y)
```

### 2. 판별 분석 성능 평가

```python
def evaluate_discriminant_analysis(lda, X_scaled, y):
    """판별 분석 성능 평가"""
    
    # 예측
    y_pred = lda.predict(X_scaled)
    
    # 성능 지표
    accuracy = accuracy_score(y, y_pred)
    precision = classification_report(y, y_pred, output_dict=True)
    
    print("판별 분석 성능 평가:")
    print(f"  전체 정확도: {accuracy:.3f}")
    print(f"  클래스별 정확도:")
    for i in range(3):
        print(f"    위험도 {i}: {precision[str(i)]['precision']:.3f}")
    
    return accuracy, precision

# 판별 분석 성능 평가 실행
performance = evaluate_discriminant_analysis(lda_model, X_scaled, y)
```

## 실무 적용 사례

### 사례 1: 자동차보험 고객 위험도 분류

```python
def auto_insurance_customer_risk_classification():
    """자동차보험 고객 위험도 분류"""
    
    # 실제 자동차보험 데이터 (예시)
    np.random.seed(42)
    n_samples = 2000
    
    # 고객 특성
    age = np.random.normal(35, 10, n_samples)
    driving_experience = np.random.normal(10, 5, n_samples)
    car_value = np.random.normal(20000, 5000, n_samples)
    claims_history = np.random.poisson(2, n_samples)
    premium_paid = np.random.normal(1000, 200, n_samples)
    
    # 위험도 분류
    risk_level = np.zeros(n_samples)
    for i in range(n_samples):
        if claims_history[i] >= 3 or age[i] < 25 or age[i] > 65:
            risk_level[i] = 2  # 고위험
        elif claims_history[i] >= 1 or age[i] < 30 or age[i] > 60:
            risk_level[i] = 1  # 중위험
        else:
            risk_level[i] = 0  # 저위험
    
    # 데이터프레임 생성
    data = pd.DataFrame({
        'age': age,
        'driving_experience': driving_experience,
        'car_value': car_value,
        'claims_history': claims_history,
        'premium_paid': premium_paid,
        'risk_level': risk_level
    })
    
    # 선형 판별 분석
    X = data[['age', 'driving_experience', 'car_value', 'claims_history', 'premium_paid']]
    y = data['risk_level']
    
    scaler = StandardScaler()
    X_scaled = scaler.fit_transform(X)
    
    lda = LinearDiscriminantAnalysis()
    lda.fit(X_scaled, y)
    
    # 예측
    y_pred = lda.predict(X_scaled)
    
    # 성능 평가
    accuracy = accuracy_score(y, y_pred)
    
    print("자동차보험 고객 위험도 분류 결과:")
    print(f"  분류 정확도: {accuracy:.3f}")
    print(f"  분류 보고서:")
    print(classification_report(y, y_pred))
    
    return data, lda, accuracy

# 자동차보험 고객 위험도 분류 실행
risk_classification = auto_insurance_customer_risk_classification()
```

### 사례 2: 보험료 산출 시스템

```python
def premium_calculation_with_discriminant_analysis(model, customer_data):
    """판별 분석을 통한 보험료 산출 시스템"""
    
    # 고객 데이터 정규화
    scaler = StandardScaler()
    customer_scaled = scaler.fit_transform([customer_data])
    
    # 위험도 예측
    predicted_risk = model.predict(customer_scaled)[0]
    
    # 위험도별 보험료 계수
    risk_multipliers = {
        0: 0.8,   # 저위험
        1: 1.0,   # 중위험
        2: 1.5    # 고위험
    }
    
    # 기본 보험료
    base_premium = 1000
    
    # 위험도별 보험료 계산
    risk_multiplier = risk_multipliers[predicted_risk]
    total_premium = base_premium * risk_multiplier
    
    return {
        'predicted_risk': predicted_risk,
        'risk_multiplier': risk_multiplier,
        'base_premium': base_premium,
        'total_premium': total_premium
    }

# 보험료 산출 시스템 실행
customer_data = [30, 5, 25000, 1, 1000]  # [나이, 운전경력, 차량가격, 사고이력, 보험료]
premium_result = premium_calculation_with_discriminant_analysis(lda_model, customer_data)
for key, value in premium_result.items():
    print(f"{key}: {value}")
```

## 판별 분석의 한계와 주의사항

### 1. 판별 분석의 한계

- **선형 관계**: 비선형 관계 모델링 어려움
- **정규성 가정**: 정규성 가정 필요
- **등분산 가정**: 등분산 가정 필요

### 2. 주의사항

- **데이터 전처리**: 데이터 정규화가 중요
- **가정 검정**: 정규성과 등분산 가정 검정
- **해석**: 판별 함수의 의미 해석 필요

## 결론

판별 분석은 보험업계에서 고객의 위험도를 분류하는 핵심 기법입니다. 특히 위험도 분류, 보험료 산출, 마케팅 전략 수립에 직접적으로 활용할 수 있습니다.

다음 포스트에서는 정준 상관 분석을 활용한 보험 모델링에 대해 살펴보겠습니다.

## 참고자료

- [Real Statistics - Miscellaneous](https://real-statistics.com/miscellaneous/)
- Klugman, S. A., Panjer, H. H., & Willmot, G. E. (2012). Loss Models: From Data to Decisions
- Kaas, R., Goovaerts, M., Dhaene, J., & Denuit, M. (2008). Modern Actuarial Risk Theory
